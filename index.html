<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
  </head>
  <body>
<div class = 'top-bar'>
<button class="new">New Tweets</button>
</div>

<div class="title-border">
<h1>Tweeter</h1>
</div>
<div class='timeline'>
    <script>
    $('.title-border').css('text-align', 'center');
    $( ".timeline" ).css( "background", "#00a0e4" );
    $( ".timeline" ).css( "color", "#dddd00" );
      $(document).ready(function(){
        var $body = $('.timeline');
        $body.html('');
        var d = new Date();
        
        function fetchTweet(list){
          $body.text('');
          //$('div').filter($('.user')).detach();
          index = list.length - 1;
          while(index >= 0){
          d = new Date();
          var tweet = list[index];
          var $tweet = $('<div></div>');
          $tweet.text('@' + tweet.user + ': ' + tweet.message + index +' ' + tweet.created_at);//d.getHours() + ':' + d.getMinutes());
          $tweet.data('user', tweet.user);
          $tweet.addClass('user');
          $tweet.appendTo($body);
          index -= 1;
        }
        $('.user').on('click', function(){
          //alert(streams.users[$(this).data('user')]);
          //alert(jQuery.now());
          
          fetchTweet(streams.users[$(this).data('user')]);
        });
        };

        //var index = streams.home.length - 1;
        //var stop = index + 1;
        fetchTweet(streams.home);
        
        $('.new').on('click', function(){
          //index = streams.home.length - 1;
          //var temp = index + 1;
          //alert(index - stop + 1 + ' new tweets');
          fetchTweet(streams.home);
        //stop = temp;
        });
        
        
        
      });
      

    </script>
   </div>
  </body>
</html>
